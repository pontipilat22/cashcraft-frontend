# ะะฐะทะดะตะปะตะฝะธะต ะฑะฐะปะฐะฝัะฐ ััะตัะฐ - ะดะพัััะฟะฝะพ ะธ ะฒ ัะตะปัั

## ๐ฏ ะะฐะดะฐัะฐ

ะะพะฑะฐะฒะธัั ะฝะฐ ะบะฐััะพัะบั ััะตัะฐ ะพัะพะฑัะฐะถะตะฝะธะต "ะดะพัััะฟะฝะพ" ะธ "ะฒ ัะตะปัั", ะบะพะณะดะฐ ะบ ััะตัั ะฟัะธะฒัะทะฐะฝั ัะตะปะธ. ะะพะบะฐะทัะฒะฐัั ัะบะพะปัะบะพ ะดะตะฝะตะณ ะดะพัััะฟะฝะพ ะดะปั ััะฐั, ะฐ ัะบะพะปัะบะพ ะทะฐัะตะทะตัะฒะธัะพะฒะฐะฝะพ ะฒ ัะตะปัั.

## ๐ ะัะธะผะตั ัะฐะฑะพัั

### **ะกะธััะฐัะธั:**
- ะะฐ ััะตัั: **1000 โฝ**
- ะฆะตะปั: **1000 โฝ**
- ะัะปะพะถะตะฝะพ ะฒ ัะตะปั: **500 โฝ**

### **ะัะพะฑัะฐะถะตะฝะธะต ะฝะฐ ะบะฐััะพัะบะต:**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ [๐ผ] ะัะฝะพะฒะฝะพะน ััะตั          โ
โ                     1000 โฝ  โ โ ะะฑัะธะน ะฑะฐะปะฐะฝั
โ                             โ
โ           ะดะพัััะฟะฝะพ: 500 โฝ   โ โ ะะพัััะฟะฝะพ ะดะปั ััะฐั
โ            ะฒ ัะตะปัั: 500 โฝ   โ โ ะะฐัะตะทะตัะฒะธัะพะฒะฐะฝะพ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## โ ะะตะฐะปะธะทะพะฒะฐะฝะฝัะต ะธะทะผะตะฝะตะฝะธั

### **1. ะะพะณะธะบะฐ ัะฐััะตัะฐ ะดะพัััะฟะฝะพะณะพ ะฑะฐะปะฐะฝัะฐ**

```typescript
// ะะพะปััะฐะตะผ ััะผะผั ะทะฐัะตะทะตัะฒะธัะพะฒะฐะฝะฝัั ะฒ ะฝะฐะบะพะฟะปะตะฝะธัั ะดะปั ะดะฐะฝะฝะพะณะพ ััะตัะฐ
const getReservedAmount = () => {
  if (account.type === 'savings') return 0;
  const linkedSavings = accounts.filter(acc => 
    acc.type === 'savings' && acc.linkedAccountId === account.id
  );
  return linkedSavings.reduce((sum, saving) => sum + (saving.savedAmount || 0), 0);
};

// ะะพัััะฟะฝัะน ะฑะฐะปะฐะฝั = ะะฑัะธะน ะฑะฐะปะฐะฝั - ะะฐัะตะทะตัะฒะธัะพะฒะฐะฝะฝัะน ะฒ ัะตะปัั
const availableBalance = account.balance - getReservedAmount();
```

### **2. ะะฑะฝะพะฒะปะตะฝะฝะพะต ะพัะพะฑัะฐะถะตะฝะธะต**

**ะะพ (ะฑัะปะพ ัะพะปัะบะพ):**
```jsx
{getBalanceDisplay(account.balance, true)}
{getReservedAmount() > 0 && (
  <Text style={{ fontSize: 12, color: colors.textSecondary, marginTop: 2 }}>
    {formatBalance(getReservedAmount())} {t('accounts.inSavings')}
  </Text>
)}
```

**ะะพัะปะต (ััะฐะปะพ):**
```jsx
{getBalanceDisplay(account.balance, true)}
{getReservedAmount() > 0 ? (
  <View style={{ alignItems: 'flex-end', marginTop: 4 }}>
    <Text style={{ fontSize: 12, color: colors.textSecondary }}>
      {t('accounts.available')}: {formatBalance(account.balance - getReservedAmount())}
    </Text>
    <Text style={{ fontSize: 12, color: colors.textSecondary, marginTop: 1 }}>
      {t('accounts.inGoals')}: {formatBalance(getReservedAmount())}
    </Text>
  </View>
) : null}
```

### **3. ะะพะฒัะต ัััะพะบะธ ะปะพะบะฐะปะธะทะฐัะธะธ**

```typescript
// src/locales/ru.ts
accounts: {
  // ...
  available: 'ะดะพัััะฟะฝะพ',      // โ ะะพะฒะพะต
  inGoals: 'ะฒ ัะตะปัั',         // โ ะะพะฒะพะต
  inSavings: 'ะฒ ะฝะฐะบะพะฟะปะตะฝะธัั', // โ ะกััะตััะฒัััะตะต (ะดะปั ัะตะปะตะน-ะฝะฐะบะพะฟะปะตะฝะธะน)
  // ...
}
```

## ๐ ะะตัะฐะปะธ ัะตะฐะปะธะทะฐัะธะธ

### **1. ะฃัะปะพะฒะธั ะพัะพะฑัะฐะถะตะฝะธั**

**ะะพะบะฐะทัะฒะฐะตััั ัะฐะทะฑะธะฒะบะฐ, ะขะะะฌะะ ะตัะปะธ:**
- `getReservedAmount() > 0` - ะตััั ะฟัะธะฒัะทะฐะฝะฝัะต ัะตะปะธ
- `account.type !== 'credit'` - ะฝะต ะบัะตะดะธัะฝัะน ััะตั
- `account.type !== 'savings'` - ะฝะต ัะฐะผะฐ ัะตะปั

**ะะต ะฟะพะบะฐะทัะฒะฐะตััั ะดะปั:**
- ะะฑััะฝัั ััะตัะพะฒ ะฑะตะท ัะตะปะตะน
- ะัะตะดะธัะฝัั ััะตัะพะฒ
- ะกะฐะผะธั ัะตะปะตะน (ั ะฝะธั ัะฒะพั ะปะพะณะธะบะฐ ะพัะพะฑัะฐะถะตะฝะธั)

### **2. ะะฐััะตั ะทะฐัะตะทะตัะฒะธัะพะฒะฐะฝะฝะพะน ััะผะผั**

```typescript
const getReservedAmount = () => {
  if (account.type === 'savings') return 0; // ะกะฐะผะธ ัะตะปะธ ะฝะต ัะตะทะตัะฒะธัััั
  
  // ะะฐัะพะดะธะผ ะฒัะต ัะตะปะธ, ะฟัะธะฒัะทะฐะฝะฝัะต ะบ ััะพะผั ััะตัั
  const linkedSavings = accounts.filter(acc => 
    acc.type === 'savings' && acc.linkedAccountId === account.id
  );
  
  // ะกัะผะผะธััะตะผ ะฒัะต ะพัะปะพะถะตะฝะฝัะต ะฒ ัะตะปัั ััะผะผั
  return linkedSavings.reduce((sum, saving) => 
    sum + (saving.savedAmount || 0), 0
  );
};
```

### **3. ะกัะธะปะธะทะฐัะธั**

```jsx
<View style={{ alignItems: 'flex-end', marginTop: 4 }}>
  {/* ะะพัััะฟะฝะพ */}
  <Text style={{ fontSize: 12, color: colors.textSecondary }}>
    {t('accounts.available')}: {formatBalance(availableAmount)}
  </Text>
  
  {/* ะ ัะตะปัั */}
  <Text style={{ fontSize: 12, color: colors.textSecondary, marginTop: 1 }}>
    {t('accounts.inGoals')}: {formatBalance(reservedAmount)}
  </Text>
</View>
```

## ๐ฑ ะะธะทัะฐะปัะฝะพะต ะฟัะตะดััะฐะฒะปะตะฝะธะต

### **ะะฐััะพัะบะฐ ะฑะตะท ัะตะปะตะน (ะบะฐะบ ัะฐะฝััะต):**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ [๐ผ] ะัะฝะพะฒะฝะพะน ััะตั          โ
โ                     1000 โฝ  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### **ะะฐััะพัะบะฐ ั ัะตะปัะผะธ (ะฝะพะฒะพะต):**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ [๐ผ] ะัะฝะพะฒะฝะพะน ััะตั          โ
โ                     1000 โฝ  โ โ ะะฑัะธะน ะฑะฐะปะฐะฝั
โ                             โ
โ           ะดะพัััะฟะฝะพ: 500 โฝ   โ โ ะะพะฒะพะต: ะดะพัััะฟะฝะพ ะดะปั ััะฐั
โ            ะฒ ัะตะปัั: 500 โฝ   โ โ ะะพะฒะพะต: ะทะฐัะตะทะตัะฒะธัะพะฒะฐะฝะพ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### **ะะฐััะพัะบะฐ ั ะฝะตัะบะพะปัะบะธะผะธ ัะตะปัะผะธ:**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ [๐ผ] ะัะฝะพะฒะฝะพะน ััะตั          โ
โ                     2000 โฝ  โ โ ะะฑัะธะน ะฑะฐะปะฐะฝั
โ                             โ
โ           ะดะพัััะฟะฝะพ: 200 โฝ   โ โ 2000 - (500 + 800 + 500)
โ            ะฒ ัะตะปัั: 1800 โฝ  โ โ ะกัะผะผะฐ ะฒัะตั ัะตะปะตะน
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐ฏ ะะพะณะธะบะฐ ัะฐะฑะพัั ั ัะฐะทะฝัะผะธ ัะธะฟะฐะผะธ ััะตัะพะฒ

### **1. ะะฑััะฝัะต ััะตัะฐ (cash, card, bank)**
- โ ะะพะบะฐะทัะฒะฐัั ะพะฑัะธะน ะฑะฐะปะฐะฝั
- โ ะะพะบะฐะทัะฒะฐัั ะดะพัััะฟะฝะพ/ะฒ ัะตะปัั (ะตัะปะธ ะตััั ัะตะปะธ)

### **2. ะัะตะดะธัะฝัะต ััะตัะฐ**
- โ ะะพะบะฐะทัะฒะฐัั "ะััะฐะปะพัั ะฒัะฟะปะฐัะธัั"
- โ ะะ ะฟะพะบะฐะทัะฒะฐัั ะดะพัััะฟะฝะพ/ะฒ ัะตะปัั

### **3. ะฆะตะปะธ (savings)**
- โ ะะพะบะฐะทัะฒะฐัั ะฟัะพะณัะตัั-ะฑะฐั
- โ ะะพะบะฐะทัะฒะฐัั ะฝะฐะบะพะฟะปะตะฝะพ/ัะตะปั
- โ ะะ ะฟะพะบะฐะทัะฒะฐัั ะดะพัััะฟะฝะพ/ะฒ ัะตะปัั (ัะฐะผะธ ัะฒะปััััั ัะตะทะตัะฒะพะผ)

## ๐งฎ ะัะธะผะตัั ัะฐััะตัะพะฒ

### **ะัะธะผะตั 1: ะะดะฝะฐ ัะตะปั**
```
ะกัะตั: 1000 โฝ
ะฆะตะปั "ะัะฟััะบ": ะฝะฐะบะพะฟะปะตะฝะพ 300 โฝ

ะะตะทัะปััะฐั:
- ะะฑัะธะน ะฑะฐะปะฐะฝั: 1000 โฝ
- ะะพัััะฟะฝะพ: 700 โฝ  (1000 - 300)
- ะ ัะตะปัั: 300 โฝ
```

### **ะัะธะผะตั 2: ะะตัะบะพะปัะบะพ ัะตะปะตะน**
```
ะกัะตั: 2000 โฝ
ะฆะตะปั "ะัะฟััะบ": ะฝะฐะบะพะฟะปะตะฝะพ 500 โฝ
ะฆะตะปั "ะะฐัะธะฝะฐ": ะฝะฐะบะพะฟะปะตะฝะพ 800 โฝ
ะฆะตะปั "ะขะตะปะตัะพะฝ": ะฝะฐะบะพะฟะปะตะฝะพ 200 โฝ

ะะตะทัะปััะฐั:
- ะะฑัะธะน ะฑะฐะปะฐะฝั: 2000 โฝ
- ะะพัััะฟะฝะพ: 500 โฝ  (2000 - 1500)
- ะ ัะตะปัั: 1500 โฝ  (500 + 800 + 200)
```

### **ะัะธะผะตั 3: ะะตัะตะพัะปะพะถะตะฝะพ (ะฑะพะปััะต ัะตะปะธ, ัะตะผ ะฝะฐ ััะตัั)**
```
ะกัะตั: 1000 โฝ
ะฆะตะปั "ะัะฟััะบ": ะฝะฐะบะพะฟะปะตะฝะพ 1200 โฝ

ะะตะทัะปััะฐั:
- ะะฑัะธะน ะฑะฐะปะฐะฝั: 1000 โฝ
- ะะพัััะฟะฝะพ: -200 โฝ  (1000 - 1200)
- ะ ัะตะปัั: 1200 โฝ

โ๏ธ ะ ััะพะผ ัะปััะฐะต ะดะพัััะฟะฝะพ ะผะพะถะตั ะฑััั ะพััะธัะฐัะตะปัะฝัะผ
```

## ๐งช ะขะตััะธัะพะฒะฐะฝะธะต

### **ะัะพะฒะตัะธัั ะพัะพะฑัะฐะถะตะฝะธะต:**

1. **ะกะพะทะดะฐะนัะต ะพะฑััะฝัะน ััะตั** ั ะฑะฐะปะฐะฝัะพะผ 1000 โฝ
2. **ะกะพะทะดะฐะนัะต ัะตะปั**, ะฟัะธะฒัะทะฐะฝะฝัั ะบ ััะพะผั ััะตัั
3. **ะัะปะพะถะธัะต 300 โฝ** ะฒ ัะตะปั
4. **ะัะพะฒะตัััะต ะบะฐััะพัะบั ััะตัะฐ:**
   - ะะฑัะธะน ะฑะฐะปะฐะฝั: 1000 โฝ
   - ะะพัััะฟะฝะพ: 700 โฝ
   - ะ ัะตะปัั: 300 โฝ

### **ะัะพะฒะตัะธัั ัะฐะทะฝัะต ััะตะฝะฐัะธะธ:**

1. **ะกัะตั ะฑะตะท ัะตะปะตะน** โ ัะพะปัะบะพ ะพะฑัะธะน ะฑะฐะปะฐะฝั
2. **ะกัะตั ั ะพะดะฝะพะน ัะตะปัั** โ ะฑะฐะปะฐะฝั + ัะฐะทะฑะธะฒะบะฐ
3. **ะกัะตั ั ะฝะตัะบะพะปัะบะธะผะธ ัะตะปัะผะธ** โ ะฑะฐะปะฐะฝั + ััะผะผะฐ ะฒัะตั ัะตะปะตะน
4. **ะัะตะดะธัะฝัะน ััะตั ั ัะตะปัะผะธ** โ ัะพะปัะบะพ "ะพััะฐะปะพัั ะฒัะฟะปะฐัะธัั"

## ๐ ะคะฐะนะปั

### **ะะทะผะตะฝะตะฝั:**
1. **src/components/AccountCard.tsx** - ะดะพะฑะฐะฒะปะตะฝะฐ ะปะพะณะธะบะฐ ะพัะพะฑัะฐะถะตะฝะธั ะดะพัััะฟะฝะพะณะพ/ะทะฐัะตะทะตัะฒะธัะพะฒะฐะฝะฝะพะณะพ ะฑะฐะปะฐะฝัะฐ
2. **src/locales/ru.ts** - ะดะพะฑะฐะฒะปะตะฝั ัััะพะบะธ `available` ะธ `inGoals`

### **ะกะพะทะดะฐะฝะพ:**
1. **ACCOUNT_BALANCE_BREAKDOWN.md** - ะดะพะบัะผะตะฝัะฐัะธั ัะฐะทะดะตะปะตะฝะธั ะฑะฐะปะฐะฝัะฐ

---

**ะกัะฐััั**: โ **ะะฐะฒะตััะตะฝะพ**

ะขะตะฟะตัั ะบะฐััะพัะบะธ ััะตัะพะฒ ะฟะพะบะฐะทัะฒะฐัั ะฝะต ัะพะปัะบะพ ะพะฑัะธะน ะฑะฐะปะฐะฝั, ะฝะพ ะธ ัะฐะทะฑะธะฒะบั ะฝะฐ "ะดะพัััะฟะฝะพ" ะธ "ะฒ ัะตะปัั", ะบะพะณะดะฐ ะบ ััะตัั ะฟัะธะฒัะทะฐะฝั ัะตะปะธ. ะญัะพ ะฟะพะผะพะณะฐะตั ะฟะพะปัะทะพะฒะฐัะตะปั ะฟะพะฝะธะผะฐัั, ัะบะพะปัะบะพ ะดะตะฝะตะณ ะพะฝ ะผะพะถะตั ััะฐัะธัั, ะฐ ัะบะพะปัะบะพ ัะถะต ะทะฐัะตะทะตัะฒะธัะพะฒะฐะฝะพ ะดะปั ะดะพััะธะถะตะฝะธั ัะตะปะตะน.
