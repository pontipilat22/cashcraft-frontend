# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

## üêû –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –¥–æ—Ö–æ–¥–∞ 5000 —Ç–µ–Ω–≥–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ "–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏", —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ "–°—á–µ—Ç–∞" –Ω–µ –æ–±–Ω–æ–≤–ª—è–ª–∞—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –î–∞–Ω–Ω—ã–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Ä—É—á–Ω–æ–≥–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –ø–µ—Ä–∏–æ–¥–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏.

## üîç –ö–æ—Ä–µ–Ω—å –ø—Ä–æ–±–ª–µ–º—ã

–ù–∞–π–¥–µ–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–±–ª–µ–º –≤ —Å–∏—Å—Ç–µ–º–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:

### 1. **–§—É–Ω–∫—Ü–∏—è getStatistics –Ω–µ –æ–±–µ—Ä–Ω—É—Ç–∞ –≤ useCallback**
```typescript
// –ë–´–õ–û (—Å–æ–∑–¥–∞–≤–∞–ª–∞—Å—å –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ):
const getStatistics = (startDate?: Date, endDate?: Date) => { ... };

// –°–¢–ê–õ–û (—Å—Ç–∞–±–∏–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏):
const getStatistics = useCallback((startDate?: Date, endDate?: Date) => { ... }, [transactions]);
```

### 2. **–§—É–Ω–∫—Ü–∏—è refreshData –Ω–µ –æ–±–µ—Ä–Ω—É—Ç–∞ –≤ useCallback**
```typescript
// –ë–´–õ–û:
const refreshData = async () => { ... };

// –°–¢–ê–õ–û:
const refreshData = useCallback(async () => { ... }, [defaultCurrency]);
```

### 3. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ endDate –≤ StatisticsCard**
```typescript
// –ë–´–õ–û (endDate = —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è):
setEndDate(now);

// –°–¢–ê–õ–û (endDate = –∫–æ–Ω–µ—Ü –¥–Ω—è):
const end = new Date(now);
end.setHours(23, 59, 59, 999);
setEndDate(end);
```

## ‚úÖ –ü—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. **DataContext.tsx**

**–î–æ–±–∞–≤–ª–µ–Ω useCallback –≤ –∏–º–ø–æ—Ä—Ç:**
```typescript
import React, { createContext, useContext, useState, useEffect, useCallback, ReactNode } from 'react';
```

**–û–±–µ—Ä–Ω—É—Ç—ã —Ñ—É–Ω–∫—Ü–∏–∏ –≤ useCallback:**
```typescript
const getStatistics = useCallback((startDate?: Date, endDate?: Date) => {
  const filteredTransactions = transactions.filter(transaction => {
    if (startDate && new Date(transaction.date) < startDate) return false;
    if (endDate && new Date(transaction.date) > endDate) return false;
    return true;
  });

  const income = filteredTransactions
    .filter(t => t.type === 'income')
    .reduce((sum, t) => sum + t.amount, 0);

  const expense = filteredTransactions
    .filter(t => t.type === 'expense')
    .reduce((sum, t) => sum + t.amount, 0);

  return { income, expense };
}, [transactions]);

const refreshData = useCallback(async () => {
  // ... –ª–æ–≥–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
}, [defaultCurrency]);
```

### 2. **StatisticsCard.tsx**

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ endDate:**
```typescript
const updateDatesForPeriod = (period: PeriodType) => {
  const now = new Date();
  let start = new Date();
  
  // ... –ª–æ–≥–∏–∫–∞ –¥–ª—è start date
  
  // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–æ–Ω–µ—Ü –¥–Ω—è –¥–ª—è endDate, —á—Ç–æ–±—ã –≤–∫–ª—é—á–∏—Ç—å –≤—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–Ω—è
  const end = new Date(now);
  end.setHours(23, 59, 59, 999);
  
  setStartDate(start);
  setEndDate(end);
};
```

## üîß –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü–æ—Ç–æ–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö:

1. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏** ‚Üí `createTransaction()` ‚Üí `refreshData()`
2. **refreshData()** ‚Üí –æ–±–Ω–æ–≤–ª—è–µ—Ç –º–∞—Å—Å–∏–≤ `transactions` –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏
3. **getStatistics** ‚Üí —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å –Ω–æ–≤—ã–º–∏ `transactions` (–±–ª–∞–≥–æ–¥–∞—Ä—è useCallback)
4. **StatisticsCard** ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è (–±–ª–∞–≥–æ–¥–∞—Ä—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç `transactions`)
5. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç** ‚Üí –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å—Ä–∞–∑—É

### –ü—Ä–æ–±–ª–µ–º–∞ —Å –≤—Ä–µ–º–µ–Ω–µ–º:

**–ë—ã–ª–æ:**
- `startDate` = 01.12.2025 00:00:00
- `endDate` = 07.12.2025 20:57:00 (—Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è)
- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è = 07.12.2025 20:58:00 ‚ùå (–Ω–µ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –ø–µ—Ä–∏–æ–¥)

**–°—Ç–∞–ª–æ:**
- `startDate` = 01.12.2025 00:00:00  
- `endDate` = 07.12.2025 23:59:59 (–∫–æ–Ω–µ—Ü –¥–Ω—è)
- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è = 07.12.2025 20:58:00 ‚úÖ (–ø–æ–ø–∞–¥–∞–µ—Ç –≤ –ø–µ—Ä–∏–æ–¥)

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚ùå –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–µ –æ–±–Ω–æ–≤–ª—è–ª–∞—Å—å –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- ‚ùå –§—É–Ω–∫—Ü–∏–∏ —Å–æ–∑–¥–∞–≤–∞–ª–∏—Å—å –∑–∞–Ω–æ–≤–æ –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ
- ‚ùå endDate –º–æ–≥ –∏—Å–∫–ª—é—á–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Ç–µ–∫—É—â–µ–≥–æ –¥–Ω—è

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–∏ (–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)
- ‚úÖ –í—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–Ω—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤–∫–ª—é—á–∞—é—Ç—Å—è –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- ‚úÖ useFocusEffect —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å useCallback —Ñ—É–Ω–∫—Ü–∏—è–º–∏

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ü–µ–Ω–∞—Ä–∏–π –ø—Ä–æ–≤–µ—Ä–∫–∏:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É "–°—á–µ—Ç–∞"** - –∑–∞–ø–æ–º–Ω–∏—Ç–µ —Ç–µ–∫—É—â—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
2. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ "–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏"**
3. **–î–æ–±–∞–≤—å—Ç–µ –¥–æ—Ö–æ–¥** (–Ω–∞–ø—Ä–∏–º–µ—Ä, 5000 —Ç–µ–Ω–≥–µ)  
4. **–í–µ—Ä–Ω–∏—Ç–µ—Å—å –Ω–∞ "–°—á–µ—Ç–∞"**
5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É** - –¥–æ–ª–∂–Ω–∞ –æ–±–Ω–æ–≤–∏—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –î–æ—Ö–æ–¥—ã –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ —É–≤–µ–ª–∏—á–∏–≤–∞—é—Ç—Å—è –Ω–∞ 5000 —Ç–µ–Ω–≥–µ —Å—Ä–∞–∑—É –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É.

## üìÅ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. `src/context/DataContext.tsx` - –æ–±–µ—Ä–Ω—É—Ç—ã —Ñ—É–Ω–∫—Ü–∏–∏ –≤ useCallback
2. `src/components/StatisticsCard.tsx` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ endDate

---

**–°—Ç–∞—Ç—É—Å**: –ü—Ä–æ–±–ª–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ–ø–µ—Ä—å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞—Ö –º–µ–∂–¥—É —ç–∫—Ä–∞–Ω–∞–º–∏.
